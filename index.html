<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>精品出版</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h1 class="logo-text">精品出版</h1>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="#test" class="nav-link">测试</a>
                <a href="#knowledge" class="nav-link">知识</a>
                <a href="#about" class="nav-link">关于</a>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">☰</button>
        </div>
    </nav>

    <div class="main-container">
        <header class="hero-section">
            <h1 class="hero-title">精品出版</h1>
            <p class="hero-subtitle">专业的心理健康评估与分析平台</p>
            <div class="hero-cta">
                <button onclick="startTest()" class="apple-button primary">开始评估</button>
                <button onclick="showKnowledge()" class="apple-button secondary">了解更多</button>
            </div>
        </header>

        <!-- 专业知识部分 -->
        <section id="knowledgeSection" class="content-section hidden">
            <div class="apple-card">
                <h2 class="section-title">心理健康专业知识</h2>
                
                <div class="knowledge-grid">
                    <div class="knowledge-card">
                        <h3>🧠 性心理健康基础</h3>
                        <p>性心理健康是整体心理健康的重要组成部分，它涉及个人对自己性身份、性需求、性关系的认知和接受程度。</p>
                        <div class="knowledge-detail">
                            <h4>核心要素：</h4>
                            <ul>
                                <li><strong>自我接受</strong>：接纳自己的性需求和欲望</li>
                                <li><strong>健康表达</strong>：以适当方式表达性需求</li>
                                <li><strong>关系和谐</strong>：在亲密关系中保持平衡</li>
                                <li><strong>社会适应</strong>：理性看待社会文化和规范</li>
                            </ul>
                        </div>
                    </div>

                    <div class="knowledge-card">
                        <h3>📊 压抑指数的科学依据</h3>
                        <p>性压抑指数评估基于现代心理学理论，通过多维度测量个人的心理状态。</p>
                        <div class="knowledge-detail">
                            <h4>理论基础：</h4>
                            <ul>
                                <li><strong>精神分析理论</strong>：弗洛伊德关于性发展的理论</li>
                                <li><strong>认知行为理论</strong>：信念系统对行为的影响</li>
                                <li><strong>人本主义心理学</strong>：马斯洛的需求层次理论</li>
                                <li><strong>社会心理学</strong>：文化和社会因素的影响</li>
                            </ul>
                        </div>
                    </div>

                    <div class="knowledge-card">
                        <h3>🎭 压抑的成因分析</h3>
                        <p>性压抑的形成往往涉及多种因素的综合作用。</p>
                        <div class="knowledge-detail">
                            <h4>主要成因：</h4>
                            <ul>
                                <li><strong>文化宗教影响</strong>：保守的文化和宗教教育</li>
                                <li><strong>家庭教育环境</strong>：父母的态度和教育方式</li>
                                <li><strong>创伤经历</strong>：负面的性相关经历</li>
                                <li><strong>社会压力</strong>：来自同辈和社会的期望</li>
                                <li><strong>自我认知偏差</strong>：对性的错误认知和信念</li>
                            </ul>
                        </div>
                    </div>

                    <div class="knowledge-card">
                        <h3>💪 改善策略与方法</h3>
                        <p>针对不同程度的压抑问题，有多种科学的改善方法。</p>
                        <div class="knowledge-detail">
                            <h4>有效方法：</h4>
                            <ul>
                                <li><strong>认知重构</strong>：识别和改变不合理信念</li>
                                <li><strong>暴露疗法</strong>：逐步面对敏感话题</li>
                                <li><strong>正念冥想</strong>：增强当下觉察和接受</li>
                                <li><strong>伴侣沟通训练</strong>：改善亲密关系交流</li>
                                <li><strong>专业心理咨询</strong>：寻求专业人士帮助</li>
                            </ul>
                        </div>
                    </div>

                    <div class="knowledge-card">
                        <h3>🌈 健康性心理的特征</h3>
                        <p>健康的性心理具有明显的积极特征。</p>
                        <div class="knowledge-detail">
                            <h4>积极特征：</h4>
                            <ul>
                                <li><strong>开放性</strong>：能够开放讨论性相关话题</li>
                                <li><strong>接受度</strong>：接纳自己和他人的性需求</li>
                                <li><strong>自主性</strong>：能够自主做出性相关决定</li>
                                <li><strong>责任感</strong>：对自己的行为负责</li>
                                <li><strong>灵活性</strong>：适应不同的情境和关系</li>
                            </ul>
                        </div>
                    </div>

                    <div class="knowledge-card">
                        <h3>⚠️ 何时需要专业帮助</h3>
                        <p>识别需要专业干预的信号非常重要。</p>
                        <div class="knowledge-detail">
                            <h4>警示信号：</h4>
                            <ul>
                                <li><strong>持续焦虑</strong>：对性话题的过度焦虑和恐惧</li>
                                <li><strong>关系困难</strong>：亲密关系中的持续问题</li>
                                <li><strong>强迫行为</strong>：无法控制的强迫性想法或行为</li>
                                <li><strong>抑郁症状</strong>：与性压抑相关的抑郁情绪</li>
                                <li><strong>功能受损</strong>：影响日常生活和工作</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="action-container">
                    <button onclick="hideKnowledge()" class="apple-button primary">返回首页</button>
                    <button onclick="startTest()" class="apple-button secondary">开始评估</button>
                </div>
            </div>
        </section>

        <section id="welcomeSection" class="content-section">
            <div class="apple-card">
                <h2 class="section-title">心理健康评估</h2>
                <p class="section-description">本评估系统基于现代心理学理论设计，通过科学的方法帮助您深入了解个人心理状态。评估过程包含多个维度的专业测试，预计需要5-8分钟完成。</p>
                
                <div class="feature-grid">
                    <div class="feature-item">
                        <div class="feature-icon">🧠</div>
                        <h3>科学设计</h3>
                        <p>基于权威心理学理论</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">📊</div>
                        <h3>多维分析</h3>
                        <p>全面的评估维度覆盖</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">🔒</div>
                        <h3>隐私保护</h3>
                        <p>数据本地处理，安全可靠</p>
                    </div>
                </div>

                <div class="info-section">
                    <h3>评估说明</h3>
                    <div class="info-list">
                        <div class="info-item">
                            <span class="info-number">01</span>
                            <span class="info-text">请根据您的真实感受回答每个问题</span>
                        </div>
                        <div class="info-item">
                            <span class="info-number">02</span>
                            <span class="info-text">没有对错之分，选择最符合您情况的选项</span>
                        </div>
                        <div class="info-item">
                            <span class="info-number">03</span>
                            <span class="info-text">评估结果仅供参考，如需专业建议请咨询专家</span>
                        </div>
                    </div>
                </div>

                <div class="cta-section">
                    <button onclick="startTest()" class="apple-button primary large">开始评估</button>
                </div>
            </div>
        </section>

        <section id="testSection" class="content-section hidden">
            <div class="progress-section">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div id="progress" class="progress-fill" style="width: 5%"></div>
                    </div>
                    <span id="progressText" class="progress-text">1 / 20</span>
                </div>
            </div>

            <div class="apple-card">
                <div class="question-container">
                    <h2 id="questionText" class="question-title">题目加载中...</h2>
                    <div id="optionsContainer" class="options-container"></div>
                </div>
                <div class="navigation-container">
                    <button onclick="previousQuestion()" id="prevBtn" class="apple-button secondary" disabled>
                        <span class="button-icon">←</span>
                        上一题
                    </button>
                    <button onclick="nextQuestion()" id="nextBtn" class="apple-button primary" disabled>
                        下一题
                        <span class="button-icon">→</span>
                    </button>
                    <button onclick="submitTest()" id="submitBtn" class="apple-button primary hidden">完成评估</button>
                </div>
            </div>
        </section>

        <section id="resultSection" class="content-section hidden">
            <div class="apple-card">
                <h2 class="section-title">评估报告</h2>
                
                <div class="result-summary">
                    <div class="score-display">
                        <div class="score-circle">
                            <span id="scoreText" class="score-number">25</span>
                        </div>
                        <div class="score-level" id="scoreLevel">轻度压抑</div>
                    </div>
                </div>

                <div id="resultDetails" class="result-details">
                    <div class="analysis-section">
                        <h3 class="subsection-title">详细分析</h3>
                        <div id="analysisContent" class="analysis-content"></div>
                    </div>

                    <div class="dimensions-section">
                        <h3 class="subsection-title">各个维度得分</h3>
                        <div id="dimensionsContent" class="dimensions-content"></div>
                    </div>

                    <div class="suggestions-section">
                        <h3 class="subsection-title">建议与指导</h3>
                        <div id="suggestionsContent" class="suggestions-content"></div>
                    </div>

                    <div class="knowledge-section">
                        <h3 class="subsection-title">专业知识指导</h3>
                        <div id="professionalKnowledge" class="knowledge-content"></div>
                    </div>
                </div>

                <div class="action-container">
                    <button onclick="showKnowledge()" class="apple-button secondary">了解更多知识</button>
                    <button onclick="restartTest()" class="apple-button secondary">重新评估</button>
                    <button onclick="shareResults()" class="apple-button primary">分享报告</button>
                </div>
            </div>
        </section>
    </div>

    <footer class="apple-footer">
        <div class="footer-container">
            <div class="footer-column">
                <h4>产品</h4>
                <ul>
                    <li><a href="#">心理健康评估</a></li>
                    <li><a href="#">专业知识</a></li>
                    <li><a href="#">个人分析</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>服务</h4>
                <ul>
                    <li><a href="#">使用指南</a></li>
                    <li><a href="#">技术支持</a></li>
                    <li><a href="#">常见问题</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>关于</h4>
                <ul>
                    <li><a href="#">团队介绍</a></li>
                    <li><a href="#">联系我们</a></li>
                    <li><a href="#">隐私政策</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 精品出版. 保留所有权利.</p>
        </div>
    </footer>

    <style>
        .knowledge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 24px;
            margin: 32px 0;
        }

        .knowledge-card {
            background: #f5f5f7;
            padding: 24px;
            border-radius: 12px;
            border-left: 4px solid #0071e3;
            transition: all 0.3s ease;
        }

        .knowledge-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 113, 227, 0.1);
        }

        .knowledge-card h3 {
            color: #1d1d1f;
            margin-bottom: 12px;
            font-size: 20px;
            font-weight: 600;
        }

        .knowledge-card p {
            color: #6e6e73;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .knowledge-detail {
            background: white;
            padding: 16px;
            border-radius: 8px;
            margin-top: 12px;
        }

        .knowledge-detail h4 {
            color: #0071e3;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .knowledge-detail ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .knowledge-detail li {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 8px;
            padding-left: 8px;
        }

        .knowledge-detail li::before {
            content: "•";
            color: #0071e3;
            font-weight: bold;
            margin-right: 8px;
        }

        @media (max-width: 768px) {
            .knowledge-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
        }
    </style>

    <script>
        // 题目数据
        const questions = [
            {
                id: 1,
                text: "当看到亲密关系的画面时，您会感到：",
                options: [
                    { text: "非常舒适自然", value: 1 },
                    { text: "略微有些不自在", value: 2 },
                    { text: "明显感到不适", value: 3 },
                    { text: "极度不自在或回避", value: 4 }
                ]
            },
            {
                id: 2,
                text: "您如何看待自己的性需求和欲望？",
                options: [
                    { text: "完全接纳并正常看待", value: 1 },
                    { text: "基本接纳但有时会犹豫", value: 2 },
                    { text: "经常感到羞耻或矛盾", value: 3 },
                    { text: "强烈否认或压抑", value: 4 }
                ]
            },
            {
                id: 3,
                text: "在与伴侣讨论性话题时，您的态度是：",
                options: [
                    { text: "开放、自然、直接", value: 1 },
                    { text: "能够讨论但有些紧张", value: 2 },
                    { text: "非常困难且回避", value: 3 },
                    { text: "完全无法提及", value: 4 }
                ]
            },
            {
                id: 4,
                text: "您如何处理性冲动或性幻想？",
                options: [
                    { text: "健康地接纳和表达", value: 1 },
                    { text: "私下接受但外在压抑", value: 2 },
                    { text: "感到内疚并试图控制", value: 3 },
                    { text: "强烈抑制和否认", value: 4 }
                ]
            },
            {
                id: 5,
                text: "您对性知识的了解程度如何？",
                options: [
                    { text: "积极主动学习和了解", value: 1 },
                    { text: "有一定了解但不够深入", value: 2 },
                    { text: "知识有限且不愿深究", value: 3 },
                    { text: "刻意回避相关信息", value: 4 }
                ]
            },
            {
                id: 6,
                text: "在亲密关系中，您更倾向于：",
                options: [
                    { text: "积极表达情感和需求", value: 1 },
                    { text: "能够表达但有限度", value: 2 },
                    { text: "经常压抑真实感受", value: 3 },
                    { text: "几乎完全不表达", value: 4 }
                ]
            },
            {
                id: 7,
                text: "您如何看待社会对性道德的看法？",
                options: [
                    { text: "理性看待并形成自己观点", value: 1 },
                    { text: "受一定影响但保持独立", value: 2 },
                    { text: "很大程度上被社会观点束缚", value: 3 },
                    { text: "完全遵循传统道德观念", value: 4 }
                ]
            },
            {
                id: 8,
                text: "当出现性需求时，您的第一反应是：",
                options: [
                    { text: "正常看待并寻找合适方式满足", value: 1 },
                    { text: "承认需求但有所顾虑", value: 2 },
                    { text: "感到冲突和矛盾", value: 3 },
                    { text: "立即否认或压抑", value: 4 }
                ]
            },
            {
                id: 9,
                text: "您对自己的身体形象和性吸引力：",
                options: [
                    { text: "自信并积极看待", value: 1 },
                    { text: "基本接受但有时不自信", value: 2 },
                    { text: "经常感到自卑或不满意", value: 3 },
                    { text: "极度否定自己的魅力", value: 4 }
                ]
            },
            {
                id: 10,
                text: "在性教育方面，您认为：",
                options: [
                    { text: "应该公开、科学地讨论", value: 1 },
                    { text: "有必要但应该适度", value: 2 },
                    { text: "应该保持低调和保守", value: 3 },
                    { text: "应该尽量避免或禁止", value: 4 }
                ]
            },
            {
                id: 11,
                text: "您如何处理与性相关的梦境或幻想？",
                options: [
                    { text: "正常看待并反思其意义", value: 1 },
                    { text: "有些困惑但能够接受", value: 2 },
                    { text: "感到羞耻或不安", value: 3 },
                    { text: "极力否认和忘记", value: 4 }
                ]
            },
            {
                id: 12,
                text: "在面对他人的性话题讨论时，您会：",
                options: [
                    { text: "自然参与并分享观点", value: 1 },
                    { text: "倾听但很少发表意见", value: 2 },
                    { text: "感到不适并尽量回避", value: 3 },
                    { text: "立刻转换话题或离开", value: 4 }
                ]
            },
            {
                id: 13,
                text: "您对自己的性历史或经历的态度是：",
                options: [
                    { text: "坦然接受并从中学习", value: 1 },
                    { text: "基本接受但有遗憾", value: 2 },
                    { text: "感到后悔或羞耻", value: 3 },
                    { text: "极力否认或不愿面对", value: 4 }
                ]
            },
            {
                id: 14,
                text: "在选择伴侣时，性和谐对您的重要性：",
                options: [
                    { text: "非常重要且优先考虑", value: 1 },
                    { text: "重要但不是首要因素", value: 2 },
                    { text: "不太重要或可以妥协", value: 3 },
                    { text: "几乎不重要或刻意忽略", value: 4 }
                ]
            },
            {
                id: 15,
                text: "您如何平衡性需求和其他生活需求？",
                options: [
                    { text: "能够健康地平衡各个方面", value: 1 },
                    { text: "基本平衡但偶尔失衡", value: 2 },
                    { text: "经常感到冲突和矛盾", value: 3 },
                    { text: "严重忽视或压抑性需求", value: 4 }
                ]
            },
            {
                id: 16,
                text: "您对媒体中与性相关内容的看法：",
                options: [
                    { text: "理性看待并选择性接受", value: 1 },
                    { text: "有所保留但不过度排斥", value: 2 },
                    { text: "大多持批评态度", value: 3 },
                    { text: "强烈反对和回避", value: 4 }
                ]
            },
            {
                id: 17,
                text: "在亲密关系中，您表达爱意的方式：",
                options: [
                    { text: "包括言语、身体等多方面", value: 1 },
                    { text: "以非性方式为主", value: 2 },
                    { text: "避免身体亲密接触", value: 3 },
                    { text: "几乎不表达亲密", value: 4 }
                ]
            },
            {
                id: 18,
                text: "您如何看待自己的性权利和边界：",
                options: [
                    { text: "明确了解并坚决维护", value: 1 },
                    { text: "基本了解但不够坚定", value: 2 },
                    { text: "模糊不清或经常妥协", value: 3 },
                    { text: "完全忽视或任人摆布", value: 4 }
                ]
            },
            {
                id: 19,
                text: "在面对性挫折或性困难时，您会：",
                options: [
                    { text: "积极寻求解决方案", value: 1 },
                    { text: "尝试解决但容易放弃", value: 2 },
                    { text: "感到羞耻并独自承受", value: 3 },
                    { text: "完全回避或否认问题", value: 4 }
                ]
            },
            {
                id: 20,
                text: "总体而言，您认为性在您生活中的地位是：",
                options: [
                    { text: "重要且健康的组成部分", value: 1 },
                    { text: "有一定位置但不是核心", value: 2 },
                    { text: "边缘化或不太重要", value: 3 },
                    { text: "希望从生活中完全排除", value: 4 }
                ]
            }
        ];

        // 全局变量
        let currentQuestion = 0;
        let answers = [];

        // 显示专业知识页面
        function showKnowledge() {
            hideAllSections();
            document.getElementById('knowledgeSection').classList.remove('hidden');
        }

        // 隐藏专业知识页面
        function hideKnowledge() {
            hideAllSections();
            document.getElementById('welcomeSection').classList.remove('hidden');
        }

        // 隐藏所有页面
        function hideAllSections() {
            const sections = ['knowledgeSection', 'welcomeSection', 'testSection', 'resultSection'];
            sections.forEach(sectionId => {
                document.getElementById(sectionId).classList.add('hidden');
            });
        }

        // 开始测试
        function startTest() {
            hideAllSections();
            document.getElementById('testSection').classList.remove('hidden');
            
            currentQuestion = 0;
            answers = [];
            showQuestion();
            
            document.getElementById('testSection').scrollIntoView({ behavior: 'smooth' });
        }

        // 显示题目
        function showQuestion() {
            console.log(`显示第 ${currentQuestion + 1} 题，共 ${questions.length} 题`);
            
            const question = questions[currentQuestion];
            const questionText = document.getElementById('questionText');
            const optionsContainer = document.getElementById('optionsContainer');
            
            // 显示题目
            questionText.textContent = question.text;
            
            // 显示选项
            optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.innerHTML = `
                    <input type="radio" id="option${index}" name="answer" value="${option.value}">
                    <label for="option${index}">${option.text}</label>
                `;
                
                optionDiv.onclick = function() {
                    selectOption(this, option.value);
                };
                
                optionsContainer.appendChild(optionDiv);
            });
            
            // 如果有之前的答案，恢复选择
            if (answers[currentQuestion]) {
                const selectedOption = document.querySelector(`input[value="${answers[currentQuestion]}"]`);
                if (selectedOption) {
                    selectedOption.checked = true;
                    selectedOption.closest('.option').classList.add('selected');
                }
            }
            
            updateProgress();
            updateButtons();
        }

        // 选择选项
        function selectOption(element, value) {
            console.log('选择了选项:', value);
            
            // 清除之前的选择
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // 设置当前选择
            element.classList.add('selected');
            element.querySelector('input').checked = true;
            
            // 保存答案
            answers[currentQuestion] = value;
            
            // 更新按钮状态
            updateButtons();
        }

        // 更新进度
        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${currentQuestion + 1} / ${questions.length}`;
        }

        // 更新按钮状态
        function updateButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            
            // 上一题按钮
            prevBtn.disabled = currentQuestion === 0;
            
            // 下一题/完成按钮
            const hasAnswer = answers[currentQuestion] !== undefined;
            const isLastQuestion = currentQuestion === questions.length - 1;
            
            if (isLastQuestion) {
                nextBtn.classList.add('hidden');
                submitBtn.classList.remove('hidden');
                submitBtn.disabled = !hasAnswer;
            } else {
                nextBtn.classList.remove('hidden');
                submitBtn.classList.add('hidden');
                nextBtn.disabled = !hasAnswer;
            }
        }

        // 上一题
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // 下一题
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            }
        }

        // 提交测试
        function submitTest() {
            console.log('提交测试，所有答案:', answers);
            
            // 计算分数
            const totalScore = answers.reduce((sum, answer) => sum + answer, 0);
            const repressionIndex = ((totalScore - 20) / 60) * 100;
            
            // 显示结果
            hideAllSections();
            document.getElementById('resultSection').classList.remove('hidden');
            
            displayResults(totalScore, repressionIndex);
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }

        // 显示结果
        function displayResults(totalScore, repressionIndex) {
            // 显示分数
            document.getElementById('scoreText').textContent = Math.round(repressionIndex);
            
            let level, levelText, color;
            if (repressionIndex < 25) {
                level = '低压抑';
                levelText = '您对性持健康开放的态度';
                color = '#4CAF50';
            } else if (repressionIndex < 50) {
                level = '轻度压抑';
                levelText = '存在一定的压抑倾向，建议适当调整';
                color = '#FF9800';
            } else if (repressionIndex < 75) {
                level = '中度压抑';
                levelText = '压抑程度较高，建议寻求专业指导';
                color = '#FF5722';
            } else {
                level = '重度压抑';
                levelText = '压抑程度很高，强烈建议寻求专业帮助';
                color = '#F44336';
            }
            
            document.getElementById('scoreLevel').textContent = level;
            document.getElementById('scoreLevel').style.color = color;
            
            // 显示详细分析
            displayAnalysis(repressionIndex);
            
            // 显示维度分析
            displayDimensions();
            
            // 显示建议
            displaySuggestions(repressionIndex);
            
            // 显示专业知识
            displayProfessionalKnowledge(repressionIndex);
        }

        // 显示详细分析
        function displayAnalysis(repressionIndex) {
            const analysisContent = document.getElementById('analysisContent');
            
            let analysisText = '';
            if (repressionIndex < 25) {
                analysisText = `
                    <div class="analysis-block">
                        <h4>🎉 恭喜您！您的性心理健康状况良好</h4>
                        <p><strong>您的压抑指数为 ${Math.round(repressionIndex)} 分，处于健康范围。</strong></p>
                        <p>这表明您：</p>
                        <ul>
                            <li>✅ 能够自然地接受和表达自己的性需求</li>
                            <li>✅ 健康地看待性在生活中的作用</li>
                            <li>✅ 与他人进行开放的性相关沟通</li>
                            <li>✅ 平衡性需求与其他生活方面的关系</li>
                        </ul>
                        <p><strong>心理学视角：</strong>您的状态符合马斯洛需求层次理论中的自我实现水平，表明您在性心理发展方面达到了成熟阶段。</p>
                    </div>
                `;
            } else if (repressionIndex < 50) {
                analysisText = `
                    <div class="analysis-block">
                        <h4>⚠️ 您存在轻微的性压抑倾向</h4>
                        <p><strong>您的压抑指数为 ${Math.round(repressionIndex)} 分，需要适当关注。</strong></p>
                        <p>常见表现包括：</p>
                        <ul>
                            <li>🔄 在特定情境下对性话题感到不适</li>
                            <li>🤔 偶尔压抑或质疑自己的性需求</li>
                            <li>🤐 在亲密关系中表达不够充分</li>
                            <li>🌐 受社会或文化观念的一定影响</li>
                        </ul>
                        <p><strong>心理学解释：</strong>这种情况在现代社会比较常见，往往与社会文化教育和个人成长经历有关。通过适当的自我认知调整，完全可以改善。</p>
                    </div>
                `;
            } else if (repressionIndex < 75) {
                analysisText = `
                    <div class="analysis-block">
                        <h4>🚨 您的性压抑程度较高</h4>
                        <p><strong>您的压抑指数为 ${Math.round(repressionIndex)} 分，需要积极干预。</strong></p>
                        <p>严重压抑的特征：</p>
                        <ul>
                            <li>😰 频繁感到与性相关的冲突和矛盾</li>
                            <li>🚪 难以正常表达和满足性需求</li>
                            <li>❌ 在亲密关系中存在显著障碍</li>
                            <li>🏃 对性相关话题的极度回避</li>
                        </ul>
                        <p><strong>专业建议：</strong>强烈建议寻求专业心理咨询师的帮助，这将有助于您深入理解压抑的根源，学习健康的应对策略。</p>
                    </div>
                `;
            } else {
                analysisText = `
                    <div class="analysis-block">
                        <h4>🆘 您的性压抑程度很严重</h4>
                        <p><strong>您的压抑指数为 ${Math.round(repressionIndex)} 分，需要立即寻求专业帮助。</strong></p>
                        <p>严重压抑的危害：</p>
                        <ul>
                            <li>💔 可能影响心理健康和整体生活质量</li>
                            <li>👥 人际关系特别是亲密关系的困难</li>
                            <li>😢 可能伴随焦虑、抑郁等心理问题</li>
                            <li>🚫 严重的身体和心理防御机制</li>
                        </ul>
                        <p><strong>紧急建议：</strong>请立即寻求专业心理健康服务。专业的心理治疗师可以为您提供安全的支持环境，帮助您逐步解决这些问题。</p>
                    </div>
                `;
            }
            
            analysisContent.innerHTML = analysisText;
        }

        // 显示维度分析
        function displayDimensions() {
            const dimensionsContent = document.getElementById('dimensionsContent');
            
            // 简化的维度分析（基于答案分布）
            const avgScore = answers.reduce((sum, answer) => sum + answer, 0) / answers.length;
            
            const dimensions = [
                { name: '情感反应', score: avgScore, description: '对性相关情绪的处理方式' },
                { name: '态度认知', score: avgScore, description: '对性的基本观念和认知' },
                { name: '沟通表达', score: avgScore, description: '性相关话题的交流能力' },
                { name: '行为模式', score: avgScore, description: '实际行为和表现' }
            ];
            
            let html = '';
            dimensions.forEach(dimension => {
                const percentage = ((dimension.score - 1) / 3) * 100;
                const status = dimension.score < 2 ? '良好' : dimension.score < 3 ? '一般' : '需要改善';
                const statusColor = dimension.score < 2 ? '#4CAF50' : dimension.score < 3 ? '#FF9800' : '#F44336';
                
                html += `
                    <div class="dimension-item">
                        <div class="dimension-header">
                            <span class="dimension-name">${dimension.name}</span>
                            <span class="dimension-score">${dimension.score.toFixed(2)}/4.0</span>
                            <span class="dimension-status" style="color: ${statusColor}">${status}</span>
                        </div>
                        <p class="dimension-desc">${dimension.description}</p>
                        <div class="dimension-bar">
                            <div class="dimension-fill" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            });
            
            dimensionsContent.innerHTML = html;
        }

        // 显示建议
        function displaySuggestions(repressionIndex) {
            const suggestionsContent = document.getElementById('suggestionsContent');
            
            let suggestions = '';
            
            if (repressionIndex < 25) {
                suggestions = `
                    <div class="suggestion-group">
                        <h4>🌟 保持健康的建议</h4>
                        <ul>
                            <li><strong>继续开放沟通：</strong>与伴侣保持开放的性话题交流</li>
                            <li><strong>终身学习：</strong>持续学习新的性知识和健康观念</li>
                            <li><strong>帮助他人：</strong>分享您的经验，帮助有需要的朋友</li>
                            <li><strong>定期自我评估：</strong>定期检查自己的心理状态</li>
                        </ul>
                    </div>
                `;
            } else if (repressionIndex < 50) {
                suggestions = `
                    <div class="suggestion-group">
                        <h4>📈 改善建议</h4>
                        <ul>
                            <li><strong>认知重构：</strong>识别和挑战不合理的性观念</li>
                            <li><strong>渐进暴露：</strong>逐步接触让自己不适的性话题</li>
                            <li><strong>伴侣练习：</strong>与信任的伴侣练习性话题讨论</li>
                            <li><strong>阅读学习：</strong>阅读科学、权威的性教育材料</li>
                            <li><strong>正念练习：</strong>通过冥想增强自我觉察</li>
                        </ul>
                    </div>
                `;
            } else {
                suggestions = `
                    <div class="suggestion-group">
                        <h4>🚨 专业干预建议</h4>
                        <ul>
                            <li><strong>寻求心理咨询：</strong>寻找专业的性心理治疗师</li>
                            <li><strong>认知行为治疗：</strong>通过CBT改变消极思维模式</li>
                            <li><strong>团体治疗：</strong>参加支持性团体治疗</li>
                            <li><strong>伴侣共同参与：</strong>如有伴侣，建议共同参与治疗</li>
                            <li><strong>耐心和坚持：</strong>心理改善需要时间和持续努力</li>
                        </ul>
                    </div>
                `;
            }
            
            suggestionsContent.innerHTML = suggestions;
        }

        // 显示专业知识
        function displayProfessionalKnowledge(repressionIndex) {
            const professionalKnowledge = document.getElementById('professionalKnowledge');
            
            let knowledge = '';
            
            if (repressionIndex < 25) {
                knowledge = `
                    <div class="knowledge-block">
                        <h4>🧠 性健康的科学基础</h4>
                        <p><strong>现代心理学观点：</strong>性健康是人类整体健康的重要组成部分。世界卫生组织（WHO）将性健康定义为一种身体、情感、心理和社会的安好状态，与性相关的权利得到尊重和保护。</p>
                        
                        <h5>🔬 神经科学视角</h5>
                        <p>现代神经科学研究表明，健康的性心理状态与大脑的多巴胺、催产素等神经递质平衡密切相关。适度的性活动有助于：</p>
                        <ul>
                            <li>改善睡眠质量和免疫功能</li>
                            <li>降低压力和焦虑水平</li>
                            <li>增强亲密关系和情感连接</li>
                            <li>提升自我认知和自信心</li>
                        </ul>
                        
                        <h5>📚 权威研究支持</h5>
                        <p>美国心理学会（APA）和世界性健康协会（WAS）的研究表明，性开放程度与心理健康水平呈正相关。您的健康状态符合这些研究的积极发现。</p>
                    </div>
                `;
            } else {
                knowledge = `
                    <div class="knowledge-block">
                        <h4>🔍 性压抑的心理学研究</h4>
                        <p><strong>弗洛伊德的精神分析理论：</strong>性压抑被认为是许多心理问题的根源。弗洛伊德认为，被压抑的性冲动会以其他方式表现出来，如焦虑、强迫症状等。</p>
                        
                        <h5>🧬 认知行为理论</h5>
                        <p>现代CBT理论认为，性压抑往往源于：</p>
                        <ul>
                            <li><strong>认知扭曲：</strong>对性的错误或极端认知</li>
                            <li><strong>条件反射：</strong>童年形成的消极联想</li>
                            <li><strong>回避行为：</strong>减少接触相关刺激</li>
                        </ul>
                        
                        <h5>💊 治疗的有效方法</h5>
                        <p><strong>性心理治疗的成功率：</strong>研究表明，专业的性心理治疗有效率可达70-85%。最有效的治疗方法包括：</p>
                        <ul>
                            <li><strong>认知重构治疗：</strong>改变消极信念系统</li>
                            <li><strong>暴露疗法：</strong>逐步面对敏感话题</li>
                            <li><strong>伴侣治疗：</strong>改善关系动态</li>
                            <li><strong>身心整合疗法：</strong>结合身体和心理的治疗</li>
                        </ul>
                    </div>
                `;
            }
            
            professionalKnowledge.innerHTML = knowledge;
        }

        // 重新测试
        function restartTest() {
            location.reload();
        }

        // 分享结果
        function shareResults() {
            const scoreText = document.getElementById('scoreText').textContent;
            const levelText = document.getElementById('scoreLevel').textContent;
            const shareText = `我刚刚完成了精品出版平台的心理健康评估，压抑指数是${scoreText}分，评估等级：${levelText}。这是一个专业的心理评估工具，推荐你也来测试一下！`;
            
            if (navigator.share) {
                navigator.share({
                    title: '精品出版 - 心理健康评估',
                    text: shareText
                });
            } else {
                navigator.clipboard.writeText(shareText);
                alert('结果已复制到剪贴板！您可以分享给朋友了。');
            }
        }

        // 移动菜单切换
        document.addEventListener('DOMContentLoaded', function() {
            const mobileToggle = document.getElementById('mobileMenuToggle');
            const navMenu = document.getElementById('navMenu');
            
            if (mobileToggle && navMenu) {
                mobileToggle.addEventListener('click', function() {
                    navMenu.classList.toggle('active');
                    mobileToggle.textContent = navMenu.classList.contains('active') ? '✕' : '☰';
                });
            }
            
            console.log('页面加载完成，系统就绪！');
        });
    </script>
</body>
</html>