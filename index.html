<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>精品出版</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h1 class="logo-text">精品出版</h1>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="#test" class="nav-link">测试</a>
                <a href="#about" class="nav-link">关于</a>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">☰</button>
        </div>
    </nav>

    <div class="main-container">
        <header class="hero-section">
            <h1 class="hero-title">精品出版</h1>
            <p class="hero-subtitle">专业的心理健康评估与分析平台</p>
            <div class="hero-cta">
                <button id="startTest" class="apple-button primary">开始评估</button>
                <button class="apple-button secondary">了解更多</button>
            </div>
        </header>

        <section id="welcomeSection" class="content-section">
            <div class="apple-card">
                <h2 class="section-title">心理健康评估</h2>
                <p class="section-description">本评估系统基于现代心理学理论设计，通过科学的方法帮助您深入了解个人心理状态。评估过程包含多个维度的专业测试，预计需要5-8分钟完成。</p>
                
                <div class="feature-grid">
                    <div class="feature-item">
                        <div class="feature-icon">🧠</div>
                        <h3>科学设计</h3>
                        <p>基于权威心理学理论</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">📊</div>
                        <h3>多维分析</h3>
                        <p>全面的评估维度覆盖</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">🔒</div>
                        <h3>隐私保护</h3>
                        <p>数据本地处理，安全可靠</p>
                    </div>
                </div>

                <div class="info-section">
                    <h3>评估说明</h3>
                    <div class="info-list">
                        <div class="info-item">
                            <span class="info-number">01</span>
                            <span class="info-text">请根据您的真实感受回答每个问题</span>
                        </div>
                        <div class="info-item">
                            <span class="info-number">02</span>
                            <span class="info-text">没有对错之分，选择最符合您情况的选项</span>
                        </div>
                        <div class="info-item">
                            <span class="info-number">03</span>
                            <span class="info-text">评估结果仅供参考，如需专业建议请咨询专家</span>
                        </div>
                    </div>
                </div>

                <div class="cta-section">
                    <button id="startTestFromWelcome" class="apple-button primary large">开始评估</button>
                </div>
            </div>
        </section>

        <section id="testSection" class="content-section hidden">
            <div class="progress-section">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div id="progress" class="progress-fill"></div>
                    </div>
                    <span id="progressText" class="progress-text">1 / 20</span>
                </div>
            </div>

            <div class="apple-card">
                <div class="question-container">
                    <h2 id="questionText" class="question-title">当看到亲密关系的画面时，您会感到：</h2>
                    <div id="optionsContainer" class="options-container">
                        <div class="option">
                            <input type="radio" id="option1" name="answer" value="1">
                            <label for="option1">非常舒适自然</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="option2" name="answer" value="2">
                            <label for="option2">略微有些不自在</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="option3" name="answer" value="3">
                            <label for="option3">明显感到不适</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="option4" name="answer" value="4">
                            <label for="option4">极度不自在或回避</label>
                        </div>
                    </div>
                </div>
                <div class="navigation-container">
                    <button id="prevBtn" class="apple-button secondary" disabled>
                        <span class="button-icon">←</span>
                        上一题
                    </button>
                    <button id="nextBtn" class="apple-button primary" disabled>
                        下一题
                        <span class="button-icon">→</span>
                    </button>
                    <button id="submitBtn" class="apple-button primary hidden">完成评估</button>
                </div>
            </div>
        </section>

        <section id="resultSection" class="content-section hidden">
            <div class="apple-card">
                <h2 class="section-title">评估报告</h2>
                
                <div class="result-summary">
                    <div class="score-display">
                        <div class="score-circle">
                            <span id="scoreText" class="score-number">25</span>
                        </div>
                        <div class="score-level" id="scoreLevel">轻度压抑</div>
                    </div>
                </div>

                <div id="resultDetails" class="result-details">
                    <div class="analysis-section">
                        <h3 class="subsection-title">详细分析</h3>
                        <div id="analysisContent" class="analysis-content">
                            <p>您的性压抑指数处于轻度范围，显示您在某些方面可能存在一定的压抑倾向。</p>
                            <ul>
                                <li>在特定情境下对性话题感到不适</li>
                                <li>偶尔压抑或质疑自己的性需求</li>
                                <li>在亲密关系中表达不够充分</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="action-container">
                    <button id="restartBtn" class="apple-button secondary">重新评估</button>
                    <button id="shareBtn" class="apple-button primary">分享报告</button>
                </div>
            </div>
        </section>
    </div>

    <footer class="apple-footer">
        <div class="footer-container">
            <div class="footer-column">
                <h4>产品</h4>
                <ul>
                    <li><a href="#">心理健康评估</a></li>
                    <li><a href="#">个性化分析</a></li>
                    <li><a href="#">专业报告</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>服务</h4>
                <ul>
                    <li><a href="#">使用指南</a></li>
                    <li><a href="#">技术支持</a></li>
                    <li><a href="#">常见问题</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 精品出版. 保留所有权利.</p>
        </div>
    </footer>

    <script>
        // 简化的JavaScript确保功能正常
        class SimpleTest {
            constructor() {
                this.currentSection = 'welcome';
                this.currentQuestion = 1;
                this.totalQuestions = 20;
                this.init();
            }

            init() {
                console.log('初始化精品出版平台...');
                this.setupEventListeners();
                console.log('初始化完成！');
            }

            setupEventListeners() {
                // 获取所有按钮
                const startBtn = document.getElementById('startTest');
                const startFromWelcomeBtn = document.getElementById('startTestFromWelcome');
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const submitBtn = document.getElementById('submitBtn');
                const restartBtn = document.getElementById('restartBtn');
                const shareBtn = document.getElementById('shareBtn');

                // 绑定事件
                if (startBtn) {
                    startBtn.addEventListener('click', () => this.startTest());
                    console.log('主导航开始按钮已绑定');
                }

                if (startFromWelcomeBtn) {
                    startFromWelcomeBtn.addEventListener('click', () => this.startTest());
                    console.log('欢迎页面开始按钮已绑定');
                }

                if (prevBtn) {
                    prevBtn.addEventListener('click', () => this.previousQuestion());
                }

                if (nextBtn) {
                    nextBtn.addEventListener('click', () => this.nextQuestion());
                }

                if (submitBtn) {
                    submitBtn.addEventListener('click', () => this.submitTest());
                }

                if (restartBtn) {
                    restartBtn.addEventListener('click', () => this.restartTest());
                }

                if (shareBtn) {
                    shareBtn.addEventListener('click', () => this.shareResults());
                }

                // 选项点击事件
                document.querySelectorAll('.option').forEach(option => {
                    option.addEventListener('click', function() {
                        document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                        this.classList.add('selected');
                        this.querySelector('input').checked = true;
                        
                        // 启用下一题按钮
                        const nextBtn = document.getElementById('nextBtn');
                        if (nextBtn) nextBtn.disabled = false;
                    });
                });

                // 移动菜单
                const mobileToggle = document.getElementById('mobileMenuToggle');
                const navMenu = document.getElementById('navMenu');
                
                if (mobileToggle && navMenu) {
                    mobileToggle.addEventListener('click', () => {
                        navMenu.classList.toggle('active');
                        mobileToggle.textContent = navMenu.classList.contains('active') ? '✕' : '☰';
                    });
                }
            }

            startTest() {
                console.log('开始测试按钮被点击');
                const welcomeSection = document.getElementById('welcomeSection');
                const testSection = document.getElementById('testSection');
                
                if (welcomeSection && testSection) {
                    welcomeSection.classList.add('hidden');
                    testSection.classList.remove('hidden');
                    testSection.scrollIntoView({ behavior: 'smooth' });
                    console.log('切换到测试页面成功');
                } else {
                    console.error('找不到页面元素');
                }
            }

            previousQuestion() {
                if (this.currentQuestion > 1) {
                    this.currentQuestion--;
                    this.updateProgress();
                }
            }

            nextQuestion() {
                if (this.currentQuestion < this.totalQuestions) {
                    this.currentQuestion++;
                    this.updateProgress();
                    
                    if (this.currentQuestion === this.totalQuestions) {
                        document.getElementById('nextBtn').classList.add('hidden');
                        document.getElementById('submitBtn').classList.remove('hidden');
                    }
                }
            }

            submitTest() {
                console.log('提交测试');
                this.showResults();
            }

            restartTest() {
                location.reload();
            }

            shareResults() {
                const shareText = `我刚刚完成了心理健康评估，快来精品出版平台测试一下！`;
                if (navigator.share) {
                    navigator.share({
                        title: '精品出版 - 心理健康评估',
                        text: shareText
                    });
                } else {
                    navigator.clipboard.writeText(shareText);
                    alert('结果已复制到剪贴板！');
                }
            }

            updateProgress() {
                const progress = ((this.currentQuestion) / this.totalQuestions) * 100;
                document.getElementById('progress').style.width = `${progress}%`;
                document.getElementById('progressText').textContent = `${this.currentQuestion} / ${this.totalQuestions}`;
            }

            showResults() {
                const testSection = document.getElementById('testSection');
                const resultSection = document.getElementById('resultSection');
                
                if (testSection && resultSection) {
                    testSection.classList.add('hidden');
                    resultSection.classList.remove('hidden');
                    resultSection.scrollIntoView({ behavior: 'smooth' });
                }
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM加载完成，开始初始化');
            try {
                new SimpleTest();
                console.log('精品出版平台启动成功！');
            } catch (error) {
                console.error('初始化失败:', error);
                alert('网站初始化失败，请刷新页面重试');
            }
        });
    </script>
</body>
</html>